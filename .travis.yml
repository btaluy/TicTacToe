branches:
  only: 
    - master
    - Develop

android:
  components:
    - tools
    - platform-tools
    - build-tools-26.0.2
    - android-26
    - sys-img-armeabi-v7a-android-26
    - extra-android-m2repository

stage: "install & test"
language:
  - android
  - node_js
matrix:
  include:
    env:
      - TestVersion="latest"
      - Android="26"
    jdk: oraclejdk8
    node_js: lts/*
    before_script:
      - echo no | android create avd --force -n test -t android-26 --abi armeabi-v7a-26
      - emulator -avd test -no-audio -no-window &
      - android-wait-for-emulator
    script:
    - . $HOME/.nvm/nvm.sh
    - nvm install stable
    - nvm use stable
    after_script:
      - echo no | npm install -g nativescript
      - tns usage-reporting disable
      - tns error-reporting disable
      - npm install
      - npm run test
    dist: precise
  install: true