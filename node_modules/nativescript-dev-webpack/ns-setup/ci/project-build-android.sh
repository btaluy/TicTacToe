#!/bin/bash
set -e
echo "Build Android"
if [ "$#" -eq 2 ]; then
    appDir=$1
    packageId=$appDir
    outFile=$2
else
    if [ "$#" -eq 3 ]; then
        appDir=$1
        packageId=$2
        outFile=$3
    else
        echo "Illegal number of parameters"
    fi
fi
echo "TestApp Folder: $appDir" 
echo "PackageId: $packageId" 
echo "Output File: $outFile" 

node_modules/.bin/tns build android --keyStorePath ~/keystore/Telerik.keystore --keyStorePassword t3l3r1kad --keyStoreAlias Telerik --keyStoreAliasPassword t3l3r1kad --release --path $appDir
cp $appDir/platforms/android/app/build/outputs/apk/$packageId-release.apk out/$outFile-release.apk
